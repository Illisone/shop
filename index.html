<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: var(--tg-theme-bg-color, #ffffff);
            --text: var(--tg-theme-text-color, #222);
            --hint: var(--tg-theme-hint-color, #999);
            --btn: var(--tg-theme-button-color, #2481cc);
            --btn-text: var(--tg-theme-button-text-color, #fff);
            --sec-bg: var(--tg-theme-secondary-bg-color, #f4f4f5);
        }
        body { font-family: -apple-system, system-ui; background: var(--bg); color: var(--text); margin: 0; padding: 0; }
        
        /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .categories {
            display: flex; overflow-x: auto; padding: 15px;
            gap: 10px; position: sticky; top: 0; background: var(--bg); z-index: 10;
        }
        .categories::-webkit-scrollbar { display: none; }
        .cat-btn {
            background: var(--sec-bg); border: none; padding: 8px 20px;
            border-radius: 20px; color: var(--text); white-space: nowrap;
            font-weight: 600; font-size: 14px; cursor: pointer;
        }
        .cat-btn.active { background: var(--btn); color: var(--btn-text); }

        /* –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ */
        .products { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 0 15px 100px; }
        .item-card {
            background: var(--sec-bg); border-radius: 20px; padding: 12px;
            display: flex; flex-direction: column; animation: fadeIn 0.3s ease;
        }
        .item-img {
            width: 100%; aspect-ratio: 1/1; background: #ddd; 
            border-radius: 15px; margin-bottom: 10px;
            display: flex; align-items: center; justify-content: center; font-size: 40px;
        }
        .item-name { font-weight: 700; font-size: 15px; margin-bottom: 4px; }
        .item-price { color: var(--btn); font-weight: 800; margin-bottom: 12px; }
        
        .add-btn {
            background: var(--btn); color: var(--btn-text); border: none;
            border-radius: 12px; padding: 10px; font-weight: bold; width: 100%;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="categories" id="cat-list">
    <button class="cat-btn active" onclick="filter('all')">–í—Å—ë</button>
    <button class="cat-btn" onclick="filter('coffee')">‚òï –ö–æ—Ñ–µ</button>
    <button class="cat-btn" onclick="filter('donuts')">üç© –ü–æ–Ω—á–∏–∫–∏</button>
    <button class="cat-btn" onclick="filter('drinks')">ü•§ –ù–∞–ø–∏—Ç–∫–∏</button>
</div>

<div class="products" id="product-grid">
    </div>

<script>
    let tg = window.Telegram.WebApp;
    let cart = [];
    const items = [
        { id: 1, cat: 'coffee', name: '–ö–∞–ø—É—á–∏–Ω–æ', price: 290, img: '‚òï' },
        { id: 2, cat: 'donuts', name: '–®–æ–∫–æ-–ü–æ–Ω—á–∏–∫', price: 150, img: 'üç©' },
        { id: 3, cat: 'drinks', name: '–õ–∏–º–æ–Ω–∞–¥', price: 220, img: 'üçπ' },
        { id: 4, cat: 'coffee', name: '–≠—Å–ø—Ä–µ—Å—Å–æ', price: 180, img: '‚òï' },
        { id: 5, cat: 'donuts', name: '–Ø–≥–æ–¥–Ω—ã–π', price: 160, img: 'üßÅ' },
        { id: 6, cat: 'drinks', name: '–ú–∞—Ç—á–∞', price: 350, img: 'üçµ' },
    ];

    function render(filterCat = 'all') {
        const grid = document.getElementById('product-grid');
        grid.innerHTML = '';
        const filtered = filterCat === 'all' ? items : items.filter(i => i.cat === filterCat);
        
        filtered.forEach(item => {
            grid.innerHTML += `
                <div class="item-card">
                    <div class="item-img">${item.img}</div>
                    <div class="item-name">${item.name}</div>
                    <div class="item-price">${item.price} ‚ÇΩ</div>
                    <button class="add-btn" onclick="addToCart('${item.name}', ${item.price})">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>`;
        });
    }

    function filter(cat) {
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
        render(cat);
    }

    function addToCart(name, price) {
        cart.push({name, price});
        tg.HapticFeedback.impactOccurred('light');
        tg.MainButton.setText(`–û–§–û–†–ú–ò–¢–¨ (${cart.reduce((s, i) => s + i.price, 0)} ‚ÇΩ)`);
        tg.MainButton.show();
    }

    tg.onEvent('mainButtonClicked', () => {
        tg.sendData(JSON.stringify({items: cart, total: cart.reduce((s, i) => s + i.price, 0)}));
    });

    render();
</script>
</body>
</html>